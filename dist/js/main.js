"use strict";var searchBtn=document.querySelector(".search__btn"),searchCloseBtn=document.querySelector(".search__close-btn"),phone=document.querySelector(".phone"),openBurger=document.querySelector(".burger__open"),closeBurger=document.querySelector(".burger__close"),navLinks=document.querySelectorAll(".nav__link"),address=document.querySelector(".contacts__address"),closeAddressBtn=document.querySelector(".contacts__close-btn"),tl=gsap.timeline();function animatePage(){tl.from(".nav",{duration:3,opacity:0,ease:"power3.out"}).from([".block-poster",".hero__picture"],{duration:1,opacity:0,ease:"power3.out"},"<")}function animateSearch(){return gsap.timeline({paused:!0,onStart:openSearch,onReverseComplete:closeSearch}).fromTo([".search__mobile",".search__mobile-label"],{display:"none",opacity:0,x:100},{duration:.5,display:"flex",opacity:1,x:0,ease:"power1.inOut"}).to(".search__btn",{duration:.5,opacity:0,display:"none",ease:"power1.inOut"},"<")}animatePage();var searchInput=animateSearch();function openSearch(){window.innerWidth<=998&&searchInput.play()}function closeSearch(){searchInput.reverse()}function animateBurger(){return gsap.timeline({paused:!0,onStart:addMenu,onReverseComplete:removeMenu}).fromTo(closeBurger,{opacity:0,display:"none"},{duration:.5,opacity:1,display:"block",ease:"power3.out"},"<").fromTo(".nav__mobile",{display:"none",opacity:0,x:-100},{duration:.5,display:"flex",opacity:1,x:0,ease:"power3.out"},"<").from(".nav__mobile-list",{duration:.5,x:400,ease:"power3.out"},"<")}searchBtn.addEventListener("click",openSearch),searchCloseBtn.addEventListener("click",closeSearch);var tlBurger=animateBurger();function addMenu(){phone.classList.add("phone__mobile_active"),document.body.classList.add("no-scroll"),tlBurger.play()}function removeMenu(){phone.classList.remove("phone__mobile_active"),document.body.classList.remove("no-scroll"),tlBurger.reverse()}function clickOnBergerLink(){navLinks.forEach((function(e){e.addEventListener("click",(function(){document.body.classList.remove("no-scroll"),tlBurger.reverse()}))}))}function switchTabs(){var e=document.querySelectorAll(".project__btn-tab"),t=document.querySelectorAll(".project__list");e.forEach((function(o,r){o.addEventListener("click",(function(){removeClass(e,"project__btn-tab_active"),removeClass(t,"project__list_active"),o.classList.add("project__btn-tab_active");var r=o.textContent.trim();t.forEach((function(e){e.dataset.tabNum===r&&(e.classList.add("project__list_active"),tl.fromTo(e,{duration:.5,x:200,opacity:0,ease:"power3.out"},{duration:.5,x:0,opacity:1,ease:"power3.out"}))}))}))}))}function removeClass(e,t){e.forEach((function(e){e.classList.remove(t)}))}function slider(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.querySelectorAll(".services__slide"),o=document.querySelector(".services__slider_active"),r=document.querySelectorAll('[data-services="Услуги по ретуши"]'),n=document.querySelectorAll('[data-services="Основной перечень"]');function a(e,t){e.forEach((function(e){return e.style.display="none"})),t.forEach((function(e){return e.style.display=""}))}t[e].classList.add("services__slide_active"),r.forEach((function(e){return e.style.display="none"})),t.forEach((function(e){e.addEventListener("click",(function(){removeClass(t,"services__slide_active"),e.classList.add("services__slide_active"),"Услуги по ретуши"===e.textContent?a(n,r):a(r,n),tl.to(o,{duration:.5,x:e.offsetLeft,ease:"power3.out"}).fromTo([n,r],{duration:.7,y:200,opacity:0},{duration:.7,y:0,opacity:1,ease:"power3.out"},"<")}))}))}function init(){var e=new ymaps.Map("map",{center:[55.768,37.634],zoom:16,controls:[]}),t=new ymaps.Placemark([55.76940785,37.63840266676759],{balloonContent:""},{iconLayout:"default#image",iconImageHref:"../images/icons/marker.png",iconImageSize:[12,12],iconImageOffset:[-20,-40]});t.events.add("click",(function(){"block"===address.style.display?closeAddress():openAddress()})),closeAddressBtn.addEventListener("click",closeAddress),window.innerWidth<=640&&e.setCenter([55.768,37.636]),e.geoObjects.add(t)}function animateBalloon(){return gsap.timeline({paused:!0,onStart:closeAddress,onReverseComplete:openAddress}).fromTo(".contacts__address",{display:"block",opacity:1},{duration:.4,display:"none",opacity:0,ease:"power1.inOut"})}openBurger.addEventListener("click",addMenu),closeBurger.addEventListener("click",removeMenu),clickOnBergerLink(),switchTabs(),slider(0),ymaps.ready(init);var tlAddress=animateBalloon();function openAddress(){tlAddress.reverse()}function closeAddress(){tlAddress.play()}function checkFormNewsletter(){var e=new window.JustValidate(".about__newsletter-form"),t=document.querySelector(".about__newsletter-form");e.addField(".about__newsletter-input",[{rule:"required"},{rule:"email",errorMessage:"Недопустимый формат"}]),preventDefault(t)}function checkFormContacts(){var e=new window.JustValidate(".contacts__form",{validateBeforeSubmitting:!0}),t=document.querySelector(".contacts__form");e.addField('.contacts__form-input[type="email"]',[{rule:"required",errorMessage:"Обязательное поле"},{rule:"email",errorMessage:"Недопустимый формат"}]).addField('.contacts__form-input[name="name"]',[{rule:"required",errorMessage:"Обязательное поле"},{rule:"maxLength",value:15,errorMessage:"Максимум 15 символов"},{rule:"minLength",value:2,errorMessage:"Минимум 2 символа"},{rule:"customRegexp",value:/^[а-яёЁa-z]+(?:\s[а-яёЁa-z]+)*$/gi,errorMessage:"Недопустимый формат"}]),preventDefault(t)}function preventDefault(e){e.addEventListener("submit",(function(t){t.preventDefault(),console.log("отправка!"),e.reset()}))}checkFormNewsletter(),checkFormContacts();